---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';

import CVModal from '../components/CVModal.astro';
import AnimatedBackground from '../components/AnimatedBackground.astro';
import ScrollBanner from '../components/ScrollBanner.astro';
---

<!doctype html>
<html lang="fr">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
    <style>
      main.home-wrapper {
        max-width: min(1040px, 100%);
      }

      section.hero {
        position: relative;
        margin-bottom: clamp(3.5rem, 6vw, 5rem);
        padding: clamp(3rem, 5vw, 4.25rem);
        background: radial-gradient(120% 140% at 10% 0%, rgba(147, 255, 255, 0.12), transparent 55%),
          linear-gradient(145deg, rgba(12, 16, 38, 0.9), rgba(5, 7, 21, 0.85));
        border-radius: 32px;
        border: 1px solid rgba(255, 255, 255, 0.08);
        box-shadow: 0 32px 80px rgba(6, 10, 32, 0.45);
        overflow: hidden;
        isolation: isolate;
      }

      .hero-glow {
        position: absolute;
        inset: 0;
        background:
          radial-gradient(50% 55% at 70% 10%, rgba(108, 243, 255, 0.28), rgba(108, 243, 255, 0)),
          radial-gradient(35% 45% at 85% 65%, rgba(92, 55, 255, 0.32), rgba(92, 55, 255, 0));
        opacity: 0.9;
        filter: blur(18px);
        transform: translateY(-8%);
        pointer-events: none;
        mix-blend-mode: screen;
      }

      .hero-grid {
        position: relative;
        display: grid;
        gap: clamp(2rem, 4vw, 3.2rem);
        grid-template-columns: minmax(0, 1.15fr) minmax(0, 0.85fr);
        align-items: stretch;
      }

      .hero-content {
        display: grid;
        gap: clamp(1.25rem, 3vw, 1.8rem);
      }

      .hero-badge {
        display: inline-flex;
        align-items: center;
        gap: 0.6rem;
        padding: 0.45rem 0.85rem;
        max-height: fit-content;
        border-radius: 999px;
        background: rgba(255, 255, 255, 0.07);
        border: 1px solid rgba(255, 255, 255, 0.12);
        font-size: 0.85rem;
        letter-spacing: 0.04em;
        text-transform: uppercase;
      }

      .hero-badge .dot {
        width: 8px;
        height: 8px;
        border-radius: 50%;
        background: var(--color-accent);
        box-shadow: 0 0 10px rgba(108, 243, 255, 0.9);
      }

      .hero-content h1 {
        margin: 0;
        font-size: clamp(2.5rem, 2.2rem + 1.8vw, 3.6rem);
        line-height: 1.05;
        letter-spacing: -0.02em;
      }

      .hero-content h1 span {
        background: linear-gradient(120deg, var(--color-accent), rgba(108, 243, 255, 0.6));
        -webkit-background-clip: text;
        color: transparent;
      }

      .hero-content p {
        margin: 0;
        font-size: clamp(1.05rem, 0.95rem + 0.4vw, 1.2rem);
        color: rgba(241, 245, 255, 0.82);
        line-height: 1.65;
        max-width: 34ch;
      }

      .hero-actions {
        display: flex;
        flex-wrap: wrap;
        gap: 0.8rem;
      }

      .hero-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(130px, 1fr));
        gap: 1rem;
        padding: 0;
        margin: 0;
        list-style: none;
      }

      .hero-stats li {
        padding: 1.1rem 1.25rem;
        border-radius: 18px;
        background: rgba(8, 10, 28, 0.65);
        border: 1px solid rgba(255, 255, 255, 0.08);
        display: grid;
        gap: 0.35rem;
      }

      .hero-stats strong {
        font-size: 1.4rem;
        font-weight: 600;
        color: rgba(255, 255, 255, 0.92);
      }

      .hero-stats span {
        font-size: 0.95rem;
        color: rgba(225, 233, 255, 0.65);
      }

      .hero-showcase {
        position: relative;
        display: grid;
        gap: 1.5rem;
      }

      .hero-preview {
        position: relative;
        display: grid;
        gap: 1rem;
        padding: clamp(1.4rem, 2vw, 1.8rem);
        border-radius: 24px;
        background: rgba(6, 8, 24, 0.72);
        border: 1px solid rgba(255, 255, 255, 0.08);
        box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.05), 0 25px 55px rgba(6, 12, 36, 0.45);
        backdrop-filter: blur(18px);
      }

      .hero-preview.primary {
        padding: clamp(1.6rem, 2vw, 2.1rem);
        background: rgba(4, 6, 20, 0.82);
        border: 1px solid rgba(108, 243, 255, 0.22);
      }

      .hero-preview header {
        display: flex;
        flex-direction: column;
        gap: 0.45rem;
      }

      .hero-chip {
        align-self: flex-start;
        padding: 0.35rem 0.75rem;
        border-radius: 999px;
        font-size: 0.75rem;
        text-transform: uppercase;
        letter-spacing: 0.06em;
        background: rgba(108, 243, 255, 0.12);
        color: rgba(108, 243, 255, 0.95);
      }

      .hero-preview h2 {
        margin: 0;
        font-size: 1.25rem;
        letter-spacing: -0.01em;
      }

      .hero-preview p {
        margin: 0;
        color: rgba(226, 233, 255, 0.75);
        font-size: 0.98rem;
        line-height: 1.55;
      }

      .hero-preview ul {
        margin: 0;
        padding-left: 1.1rem;
        display: grid;
        gap: 0.4rem;
        color: rgba(216, 225, 255, 0.7);
        font-size: 0.92rem;
      }

      .hero-mini-cards {
        display: grid;
        gap: 0.9rem;
      }

      .hero-mini {
        display: flex;
        flex-direction: column;
        gap: 0.45rem;
        padding: 1.1rem 1.2rem;
        border-radius: 18px;
        background: rgba(255, 255, 255, 0.03);
        border: 1px solid rgba(255, 255, 255, 0.06);
      }

      .hero-mini span {
        font-size: 0.82rem;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        color: rgba(164, 198, 255, 0.65);
      }

      .hero-mini strong {
        font-size: 1rem;
        font-weight: 600;
        color: rgba(244, 247, 255, 0.95);
      }

      section.home-section {
        text-align: left;
        padding-top: clamp(2rem, 4vw, 3.5rem);
        padding-bottom: clamp(2rem, 4vw, 3.5rem);
      }

      .home-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
        gap: clamp(1.25rem, 3vw, 2.25rem);
        margin-top: clamp(1.5rem, 3vw, 2.5rem);
      }

      .home-card {
        --rx: 0deg;
        --ry: 0deg;
        position: relative;
        display: flex;
        flex-direction: column;
        gap: 1.25rem;
        padding: clamp(1.75rem, 3vw, 2.4rem);
        background: rgba(5, 7, 21, 0.6);
        border: 1px solid rgba(255, 255, 255, 0.08);
        border-radius: 22px;
        box-shadow: var(--shadow-soft);
        color: inherit;
        text-decoration: none;
        overflow: hidden;
        transition: transform 0.35s ease, border-color 0.35s ease, box-shadow 0.35s ease;
        transform: perspective(900px) rotateX(var(--rx)) rotateY(var(--ry)) translateZ(0);
        will-change: transform;
      }

      .home-card::before {
        content: "";
        position: absolute;
        inset: -50% -40% -50% -40%;
        background:
          radial-gradient(
            circle at center,
            rgba(108, 243, 255, 0.24) 0%,
            rgba(108, 243, 255, 0.16) 30%,
            rgba(108, 243, 255, 0.08) 60%,
            rgba(108, 243, 255, 0) 85%
          );
        opacity: 0;
        transform: translate3d(0, -12%, 0) scale(1.12);
        transition: opacity 0.45s ease, transform 0.45s ease;
        pointer-events: none;
      }

      .home-card::after {
        content: "";
        position: absolute;
        inset: 1px;
        border-radius: inherit;
        border: 1px solid rgba(255, 255, 255, 0.1);
        opacity: 0.4;
        pointer-events: none;
      }

      .home-card .card-heading {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 1.1rem;
      }

      .home-card .card-heading h3 {
        margin: 0;
        font-size: clamp(1.25rem, 1.1rem + 0.8vw, 1.6rem);
        text-wrap: balance;
      }

      .home-card p {
        margin: 0;
        color: rgba(244, 247, 255, 0.78);
        line-height: 1.55;
        font-size: clamp(1rem, 0.98rem + 0.2vw, 1.06rem);
        text-wrap: pretty;
        min-height: 3.6em;
      }

      .home-card .desc-long {
        position: absolute;
        left: 0;
        right: 0;
        bottom: clamp(1.75rem, 3vw, 2.4rem);
        padding-inline: clamp(1.75rem, 3vw, 2.4rem);
        opacity: 0;
        transform: translate3d(0, 12px, 0);
        transition: opacity 0.35s ease, transform 0.35s ease;
      }

      .home-card .desc-short {
        transition: opacity 0.35s ease, transform 0.35s ease;
      }

      .home-card .card-arrow {
        width: 42px;
        height: 42px;
        border-radius: 50%;
        display: grid;
        place-items: center;
        background: rgba(108, 243, 255, 0.12);
        color: var(--color-primary);
        font-size: 1.1rem;
        transition: transform 0.35s ease, background 0.35s ease;
      }

      .home-card.is-hovered::before {
        opacity: 1;
        transform: translate3d(var(--lx, 0), var(--ly, -12%), 0) scale(1.2);
      }

      .home-card.is-hovered .desc-short {
        opacity: 0;
        transform: translate3d(0, -12px, 0);
      }

      .home-card.is-hovered .desc-long {
        opacity: 1;
        transform: translate3d(0, 0, 0);
      }

      .home-card.is-hovered .card-arrow {
        transform: translateX(8px) rotate(-25deg);
        background: rgba(108, 243, 255, 0.28);
      }

      .home-card:hover {
        border-color: rgba(108, 243, 255, 0.35);
        box-shadow: var(--shadow-strong);
      }

      @media (max-width: 900px) {
        .hero-grid {
          grid-template-columns: 1fr;
        }
      }

      @media (max-width: 640px) {
        section.hero {
          padding: 2.25rem;
        }

        .hero-actions {
          flex-direction: column;
          align-items: stretch;
        }

        .hero-stats {
          grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
        }

        .hero-mini {
          flex-direction: column;
          align-items: flex-start;
          justify-content: flex-start;
          gap: 0.55rem;
        }

        .home-card {
          padding: 1.6rem;
          transform: none !important;
        }

        .home-card::before {
          opacity: 0.55;
          transform: translate3d(0, -8%, 0) scale(1.08);
          background:
            radial-gradient(
              circle at center,
              rgba(108, 243, 255, 0.14) 0%,
              rgba(108, 243, 255, 0.08) 40%,
              rgba(108, 243, 255, 0.04) 70%,
              rgba(108, 243, 255, 0) 90%
            );
        }

        .home-card .desc-long {
          position: static;
          padding: 0;
        }

        .home-card .desc-short {
          display: none;
        }

        .home-card .desc-long {
          opacity: 1;
          transform: translate3d(0, 0, 0);
        }
      }

      @media (prefers-reduced-motion: reduce) {
        section.hero {
          background: linear-gradient(150deg, rgba(12, 16, 38, 0.95), rgba(5, 7, 21, 0.9));
        }

        .hero-glow {
          display: none;
        }

        .home-card {
          transition: border-color 0.2s ease, box-shadow 0.2s ease;
          transform: none !important;
        }
        .home-card::before {
          transition: opacity 0.2s ease;
          transform: translate3d(0, -10%, 0) scale(1.02) !important;
          opacity: 1;
        }
      }
    </style>
  </head>
  <body>
    <AnimatedBackground />
    <Header />
    <main class="home-wrapper px-6 pt-20 mx-auto">
      <section class="hero">
        <div class="hero-glow" aria-hidden="true"></div>
        <div class="hero-grid">
          <div class="hero-content">
        <span class="hero-badge" data-aos="fade-up" data-aos-delay="100">
          <span class="dot"></span>
          Portfolio · Expériences numériques
        </span>
        <h1 data-aos="fade-up" data-aos-delay="200">Nathan DEJEAN</h1>
        <p data-aos="fade-up" data-aos-delay="300">
          Étudiant en BUT MMI, je donne vie à des interfaces immersives où design, stratégie et créativité s’articulent pour créer des expériences qui marquent.
        </p>
        <div class="hero-actions" data-aos="fade-up" data-aos-delay="400">
          <a href="/work" class="max-h-14 px-6 py-3 bg-[var(--color-accent)] text-white rounded-xl hover:bg-[var(--color-accent-light)] transition">Voir mes projets</a>
          <a href="/about" class="max-h-14 px-6 py-3 border border-[var(--color-accent)] text-[var(--color-accent)] rounded-xl hover:bg-[var(--color-surface)] transition">En savoir plus</a>
        </div>
          </div>
          <div class="hero-showcase">
        <div class="hero-mini-cards">
          <div class="hero-mini" data-aos="fade-left" data-aos-delay="200">
            <span>Graphisme</span>
            <strong>Illustrator, Photoshop, Figma</strong>
          </div>
          <div class="hero-mini" data-aos="fade-left" data-aos-delay="300">
            <span>UI/UX</span>
            <strong>Figma</strong>
          </div>
          <div class="hero-mini" data-aos="fade-left" data-aos-delay="400">
            <span>Développement</span>
            <strong>HTML · CSS · Tailwind · JavaScript · PHP</strong>
          </div>
          <div class="hero-mini" data-aos="fade-left" data-aos-delay="500">
            <span>SEO</span>
            <strong>Google Analytics · Lighthouse · Autres Extensions SEO</strong>
          </div>
        </div>
        <div class="justify-self-center" data-aos="fade-left" data-aos-delay="600">
          <button onclick="window.openCVModal()" class="inline-flex items-center justify-end gap-2 px-5 py-2 border border-[var(--color-accent)] bg-[var(--color-accent)] text-white rounded-lg hover:bg-[var(--color-surface)] transition cursor-pointer">
            Voir mon CV
            <span aria-hidden="true">↗</span>
          </button>
        </div>
          </div>
        </div>
      </section>
      <ScrollBanner />
      <section class="home-section">
        <h2 class="text-2xl font-bold mb-2" data-aos="fade-up">À propos du site</h2>
        <p class="text-base text-muted mb-6" data-aos="fade-up" data-aos-delay="100">
          Ce portfolio est construit avec <strong>Astro</strong> &amp; <strong>Tailwind CSS</strong>. Il me permet de documenter mes projets, mes idées, et d'expérimenter avec les technos web modernes.
        </p>
        <hr class="my-6 border-[var(--color-surface)]" data-aos="fade" data-aos-delay="150">
        <h3 class="text-xl font-semibold mb-2" data-aos="fade-up" data-aos-delay="200">Ce que vous pouvez explorer :</h3>
        <div class="home-grid">
          <a href="/work" class="home-card reveal" data-card="projects" data-aos="fade-up" data-aos-delay="100">
            <div class="card-heading">
              <h3>Mes projets</h3>
              <span class="card-arrow" aria-hidden="true">➔</span>
            </div>
            <p class="desc-short">
              Une sélection de mes réalisations.
            </p>
            <p class="desc-long">
              Retrouvez une partie de mes projets réalisés au cours des dernières années.
            </p>
          </a>
          <a href="/blog" class="home-card reveal" data-card="articles" data-aos="fade-up" data-aos-delay="200">
            <div class="card-heading">
              <h3>Articles</h3>
              <span class="card-arrow" aria-hidden="true">➔</span>
            </div>
            <p class="desc-short">
              Mes notes autour du design &amp; du numérique.
            </p>
            <p class="desc-long">
              Des articles où je partage veille et retours d’expérience.
            </p>
          </a>
          <a href="/about" class="home-card reveal" data-card="about" data-aos="fade-up" data-aos-delay="300">
            <div class="card-heading">
              <h3>Présentation</h3>
              <span class="card-arrow" aria-hidden="true">➔</span>
            </div>
            <p class="desc-short">
              Faites connaissance en quelques lignes.
            </p>
            <p class="desc-long">
              Découvrez mon parcours et ce qui me motive à créer des expériences numériques.
            </p>
          </a>
        </div>
      </section>
    </main>
    <Footer />
    <CVModal />
    <script is:inline>
      (() => {
        const cards = document.querySelectorAll('.home-card');
        if (!cards.length) return;

        const isCoarse = window.matchMedia('(pointer: coarse)').matches;
        const prefersReduced = window.matchMedia('(prefers-reduced-motion: reduce)').matches;
        const disableInteractive = isCoarse || prefersReduced || window.innerWidth < 640;

        cards.forEach((card) => {
          requestAnimationFrame(() => {
            card.classList.add('is-visible');
          });

          if (disableInteractive) return;

          let rafId = null;

          const onMove = (event) => {
            if (rafId) return;
            rafId = requestAnimationFrame(() => {
              rafId = null;

              const rect = card.getBoundingClientRect();
              const x = event.clientX - rect.left;
              const y = event.clientY - rect.top;

              const nx = Math.max(-1, Math.min(1, (x / rect.width) * 2 - 1));
              const ny = Math.max(-1, Math.min(1, (y / rect.height) * 2 - 1));

              const rotateX = -ny * 6;
              const rotateY = nx * 6;

              const dampY = ny * 0.5;
              const offsetY = -0.12;

              const lx = nx * 35;
              const ly = (dampY * 35) + (offsetY * 100);

              const lyClamped = Math.max(-44, Math.min(16, ly));

              card.style.setProperty('--rx', `${rotateX.toFixed(2)}deg`);
              card.style.setProperty('--ry', `${rotateY.toFixed(2)}deg`);
              card.style.setProperty('--lx', `${lx.toFixed(2)}%`);
              card.style.setProperty('--ly', `${lyClamped.toFixed(2)}%`);
              card.classList.add('is-hovered');
            });
          };

          card.addEventListener('pointermove', onMove, { passive: true });

          card.addEventListener('pointerleave', () => {
            card.classList.remove('is-hovered');
            card.style.setProperty('--rx', '0deg');
            card.style.setProperty('--ry', '0deg');
            card.style.removeProperty('--lx');
            card.style.removeProperty('--ly');
          }, { passive: true });
        });
      })();
    </script>
  </body>
</html>